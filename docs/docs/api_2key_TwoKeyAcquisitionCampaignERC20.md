---
id: 2key_TwoKeyAcquisitionCampaignERC20
title: TwoKeyAcquisitionCampaignERC20
---

<div class="contract-doc"><div class="contract"><h2 class="contract-header"><span class="contract-kind">contract</span> TwoKeyAcquisitionCampaignERC20</h2><p class="base-contracts"><span>is</span> <a href="2key_TwoKeyCampaignARC.html">TwoKeyCampaignARC</a><span>, </span><a href="2key_TwoKeyTypes.html">TwoKeyTypes</a></p><div class="source">Source: <a href="git+https://github.com/2keynet/web3-alpha/blob/v0.0.1/contracts/2key/TwoKeyAcquisitionCampaignERC20.sol" target="_blank">2key/TwoKeyAcquisitionCampaignERC20.sol</a></div><div class="author">Author: Nikola Madjarevic Contract which will represent campaign for the fungible assets</div></div><div class="index"><h2>Index</h2><ul><li><a href="2key_TwoKeyAcquisitionCampaignERC20.html#Expired">Expired</a></li><li><a href="2key_TwoKeyAcquisitionCampaignERC20.html#ReceivedEther">ReceivedEther</a></li><li><a href="2key_TwoKeyAcquisitionCampaignERC20.html#actuallyFulfilledTwoKeyToken">actuallyFulfilledTwoKeyToken</a></li><li><a href="2key_TwoKeyAcquisitionCampaignERC20.html#addAssetContractERC20">addAssetContractERC20</a></li><li><a href="2key_TwoKeyAcquisitionCampaignERC20.html#addFungibleAsset">addFungibleAsset</a></li><li><a href="2key_TwoKeyAcquisitionCampaignERC20.html#buyFromWithTwoKey">buyFromWithTwoKey</a></li><li><a href="2key_TwoKeyAcquisitionCampaignERC20.html#calculateModeratorFee">calculateModeratorFee</a></li><li><a href="2key_TwoKeyAcquisitionCampaignERC20.html#cancelAssetTwoKey">cancelAssetTwoKey</a></li><li><a href="2key_TwoKeyAcquisitionCampaignERC20.html#cancelledEscrow">cancelledEscrow</a></li><li><a href="2key_TwoKeyAcquisitionCampaignERC20.html#checkAmountAddressSent">checkAmountAddressSent</a></li><li><a href="2key_TwoKeyAcquisitionCampaignERC20.html#checkAndUpdateInventoryBalance">checkAndUpdateInventoryBalance</a></li><li><a href="2key_TwoKeyAcquisitionCampaignERC20.html#checkInventoryBalance">checkInventoryBalance</a></li><li><a href="2key_TwoKeyAcquisitionCampaignERC20.html#didConverterConvert">didConverterConvert</a></li><li><a href="2key_TwoKeyAcquisitionCampaignERC20.html#expireEscrow">expireEscrow</a></li><li><a href="2key_TwoKeyAcquisitionCampaignERC20.html#">fallback</a></li><li><a href="2key_TwoKeyAcquisitionCampaignERC20.html#">fallback</a></li><li><a href="2key_TwoKeyAcquisitionCampaignERC20.html#fulfillFungibleETH">fulfillFungibleETH</a></li><li><a href="2key_TwoKeyAcquisitionCampaignERC20.html#fulfillFungibleTwoKeyToken">fulfillFungibleTwoKeyToken</a></li><li><a href="2key_TwoKeyAcquisitionCampaignERC20.html#getAssetContractAddress">getAssetContractAddress</a></li><li><a href="2key_TwoKeyAcquisitionCampaignERC20.html#getContractBalance">getContractBalance</a></li><li><a href="2key_TwoKeyAcquisitionCampaignERC20.html#isClosed">isClosed</a></li><li><a href="2key_TwoKeyAcquisitionCampaignERC20.html#isOngoing">isOngoing</a></li><li><a href="2key_TwoKeyAcquisitionCampaignERC20.html#isWhiteListedInfluencer">isWhiteListedInfluencer</a></li><li><a href="2key_TwoKeyAcquisitionCampaignERC20.html#isWhitelistedConverter">isWhitelistedConverter</a></li><li><a href="2key_TwoKeyAcquisitionCampaignERC20.html#moveFungibleAsset">moveFungibleAsset</a></li><li><a href="2key_TwoKeyAcquisitionCampaignERC20.html#redeemTwoKeyToken">redeemTwoKeyToken</a></li><li><a href="2key_TwoKeyAcquisitionCampaignERC20.html#transferAssetTwoKeyToken">transferAssetTwoKeyToken</a></li><li><a href="2key_TwoKeyAcquisitionCampaignERC20.html#transferFungibleAsset">transferFungibleAsset</a></li></ul></div><div class="reference"><h2>Reference</h2><div class="events"><h3>Events</h3><ul><li><div class="item event"><span id="Expired" class="anchor-marker"></span><h4 class="name">Expired</h4><div class="body"><code class="signature">event <strong>Expired</strong><span>(address _contract) </span></code><hr/><div class="description"><p>Event which will be emitted when conversion expire.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_contract</code> - address</div></dd></dl></div></div></li><li><div class="item event"><span id="ReceivedEther" class="anchor-marker"></span><h4 class="name">ReceivedEther</h4><div class="body"><code class="signature">event <strong>ReceivedEther</strong><span>(address _sender, uint value) </span></code><hr/><div class="description"><p>Event which will be emitted when fallback function is executed.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_sender</code> - address</div><div><code>value</code> - uint</div></dd></dl></div></div></li></ul></div><div class="modifiers"><h3>Modifiers</h3><ul><li><div class="item modifier"><span id="didConverterConvert" class="anchor-marker"></span><h4 class="name">didConverterConvert</h4><div class="body"><code class="signature">modifier <strong>didConverterConvert</strong><span>() </span></code><hr/><div class="description"><p>Modifier to check if the Converter did the conversion.</p></div></div></div></li><li><div class="item modifier"><span id="isClosed" class="anchor-marker"></span><h4 class="name">isClosed</h4><div class="body"><code class="signature">modifier <strong>isClosed</strong><span>() </span></code><hr/><div class="description"><p>Modifier which is going to check if campaign is closed (if time is greater then closing time).</p></div></div></div></li><li><div class="item modifier"><span id="isOngoing" class="anchor-marker"></span><h4 class="name">isOngoing</h4><div class="body"><code class="signature">modifier <strong>isOngoing</strong><span>() </span></code><hr/><div class="description"><p>Modifier which is going to check if current time is between opening-closing campaign time.</p></div></div></div></li><li><div class="item modifier"><span id="isWhiteListedInfluencer" class="anchor-marker"></span><h4 class="name">isWhiteListedInfluencer</h4><div class="body"><code class="signature">modifier <strong>isWhiteListedInfluencer</strong><span>() </span></code><hr/><div class="description"><p>Modifier to check is the influencer eligible for participation in campaign.</p></div></div></div></li><li><div class="item modifier"><span id="isWhitelistedConverter" class="anchor-marker"></span><h4 class="name">isWhitelistedConverter</h4><div class="body"><code class="signature">modifier <strong>isWhitelistedConverter</strong><span>() </span></code><hr/><div class="description"><p>Modifier to check is the converter eligible for participation in conversion.</p></div></div></div></li></ul></div><div class="functions"><h3>Functions</h3><ul><li><div class="item function"><span id="actuallyFulfilledTwoKeyToken" class="anchor-marker"></span><h4 class="name">actuallyFulfilledTwoKeyToken</h4><div class="body"><code class="signature">function <strong>actuallyFulfilledTwoKeyToken</strong><span>() </span><span>internal </span></code><hr/></div></div></li><li><div class="item function"><span id="addAssetContractERC20" class="anchor-marker"></span><h4 class="name">addAssetContractERC20</h4><div class="body"><code class="signature">function <strong>addAssetContractERC20</strong><span>(address _assetContract) </span><span>public </span></code><hr/><div class="description"><p>Function to add asset contract of specific ERC20.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_assetContract</code> - of that asset Contract</div></dd></dl></div></div></li><li><div class="item function"><span id="addFungibleAsset" class="anchor-marker"></span><h4 class="name">addFungibleAsset</h4><div class="body"><code class="signature">function <strong>addFungibleAsset</strong><span>(uint256 _amount) </span><span>public </span><span>returns  (bool) </span></code><hr/><div class="description"><p>When user calls this method, he just says the actual amount of ERC20 he&#x27;d like to transfer to us, Method to add fungible asset to our contract.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_amount</code> - is the amount of ERC20 contract he&#x27;d like to give us</div></dd><dt><span class="label-return">Returns:</span></dt><dd>true if successful, otherwise transaction will revert</dd></dl></div></div></li><li><div class="item function"><span id="buyFromWithTwoKey" class="anchor-marker"></span><h4 class="name">buyFromWithTwoKey</h4><div class="body"><code class="signature">function <strong>buyFromWithTwoKey</strong><span>(address _from, string _assetName, address _assetContract, uint256 _amount) </span><span>public </span><span>payable </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_from</code> - address</div><div><code>_assetName</code> - string</div><div><code>_assetContract</code> - address</div><div><code>_amount</code> - uint256</div></dd></dl></div></div></li><li><div class="item function"><span id="calculateModeratorFee" class="anchor-marker"></span><h4 class="name">calculateModeratorFee</h4><div class="body"><code class="signature">function <strong>calculateModeratorFee</strong><span>(uint256 _payout) </span><span>internal </span><span>view </span><span>returns  (uint256) </span></code><hr/><div class="description"><p>Given the total payout, calculates the moderator fee.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_payout</code> - total payout for escrow</div></dd><dt><span class="label-return">Returns:</span></dt><dd>moderator fee</dd></dl></div></div></li><li><div class="item function"><span id="cancelAssetTwoKey" class="anchor-marker"></span><h4 class="name">cancelAssetTwoKey</h4><div class="body"><code class="signature">function <strong>cancelAssetTwoKey</strong><span>(address _converter, string _assetName, address _assetContract, uint256 _amount) </span><span>public </span><span>returns  (bool) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_converter</code> - address</div><div><code>_assetName</code> - string</div><div><code>_assetContract</code> - address</div><div><code>_amount</code> - uint256</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bool</dd></dl></div></div></li><li><div class="item function"><span id="cancelledEscrow" class="anchor-marker"></span><h4 class="name">cancelledEscrow</h4><div class="body"><code class="signature">function <strong>cancelledEscrow</strong><span>(address _converter, address _assetContract, uint256 _amount) </span><span>internal </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_converter</code> - address</div><div><code>_assetContract</code> - address</div><div><code>_amount</code> - uint256</div></dd></dl></div></div></li><li><div class="item function"><span id="checkAmountAddressSent" class="anchor-marker"></span><h4 class="name">checkAmountAddressSent</h4><div class="body"><code class="signature">function <strong>checkAmountAddressSent</strong><span>(address _from) </span><span>public </span><span>view </span><span>returns  (uint) </span></code><hr/><div class="description"><p>Function to check how much eth has been sent to contract from address.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_from</code> - is the address we&#x27;d like to check balance</div></dd><dt><span class="label-return">Returns:</span></dt><dd>amount of ether sent to contract from the specified address</dd></dl></div></div></li><li><div class="item function"><span id="checkAndUpdateInventoryBalance" class="anchor-marker"></span><h4 class="name">checkAndUpdateInventoryBalance</h4><div class="body"><code class="signature">function <strong>checkAndUpdateInventoryBalance</strong><span>() </span><span>public </span><span>returns  (uint) </span></code><hr/><div class="description"><p>Function which will check the balance and automatically update the balance in our contract regarding balance response.</p></div><dl><dt><span class="label-return">Returns:</span></dt><dd>balance of ERC20 we have in our contract</dd></dl></div></div></li><li><div class="item function"><span id="checkInventoryBalance" class="anchor-marker"></span><h4 class="name">checkInventoryBalance</h4><div class="body"><code class="signature">function <strong>checkInventoryBalance</strong><span>() </span><span>public </span><span>view </span><span>returns  (uint) </span></code><hr/><div class="description"><p>We&#x27;re using interface of ERC20 and fetching the balance of this contract address, Function to check balance of the ERC20 inventory (view - no gas needed to call this function).</p></div><dl><dt><span class="label-return">Returns:</span></dt><dd>balance value as uint</dd></dl></div></div></li><li><div class="item function"><span id="expireEscrow" class="anchor-marker"></span><h4 class="name">expireEscrow</h4><div class="body"><code class="signature">function <strong>expireEscrow</strong><span>(address _converter, address _assetContract, uint256 _amount) </span><span>public </span><span>returns  (bool) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_converter</code> - address</div><div><code>_assetContract</code> - address</div><div><code>_amount</code> - uint256</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bool</dd></dl></div></div></li><li><div class="item function"><span id="fallback" class="anchor-marker"></span><h4 class="name">fallback</h4><div class="body"><code class="signature">function <strong></strong><span>(address _twoKeyEventSource, address _twoKeyEconomy, address _whitelistInfluencer, address _whitelistConverter, address _contractor, address _moderator, uint _openingTime, uint _closingTime, uint _expiryConversion, uint _escrowPercentage, uint _rate, uint _maxPi) </span><span>public </span></code><hr/><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_twoKeyEventSource</code> - address</div><div><code>_twoKeyEconomy</code> - address</div><div><code>_whitelistInfluencer</code> - address</div><div><code>_whitelistConverter</code> - address</div><div><code>_contractor</code> - address</div><div><code>_moderator</code> - address</div><div><code>_openingTime</code> - uint</div><div><code>_closingTime</code> - uint</div><div><code>_expiryConversion</code> - uint</div><div><code>_escrowPercentage</code> - uint</div><div><code>_rate</code> - uint</div><div><code>_maxPi</code> - uint</div></dd></dl></div></div></li><li><div class="item function"><span id="fallback" class="anchor-marker"></span><h4 class="name">fallback</h4><div class="body"><code class="signature">function <strong></strong><span>() </span><span>external </span><span>payable </span></code><hr/><div class="description"><p>Will emit an event with address and value sent, (Fallback)Payable function which will accept all transactions which are sending ether to contract.</p></div></div></div></li><li><div class="item function"><span id="fulfillFungibleETH" class="anchor-marker"></span><h4 class="name">fulfillFungibleETH</h4><div class="body"><code class="signature">function <strong>fulfillFungibleETH</strong><span>(address _from, uint256 _amountETH) </span><span>internal </span></code><hr/><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="2key_TwoKeyAcquisitionCampaignERC20.html#isOngoing">isOngoing </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_from</code> - address</div><div><code>_amountETH</code> - uint256</div></dd></dl></div></div></li><li><div class="item function"><span id="fulfillFungibleTwoKeyToken" class="anchor-marker"></span><h4 class="name">fulfillFungibleTwoKeyToken</h4><div class="body"><code class="signature">function <strong>fulfillFungibleTwoKeyToken</strong><span>(address _from, string _assetName, address _assetContract, uint256 _amount) </span><span>internal </span></code><hr/><div class="description"><p>I wanna pay for something with TwoKey tokens Amount should be the amount of twokey tokens tokenID -&gt; assetName Acquisition campaign is campaign which is selling something which can be bought with 2key or ETH.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_from</code> - address</div><div><code>_assetName</code> - string</div><div><code>_assetContract</code> - address</div><div><code>_amount</code> - uint256</div></dd></dl></div></div></li><li><div class="item function"><span id="getAssetContractAddress" class="anchor-marker"></span><h4 class="name">getAssetContractAddress</h4><div class="body"><code class="signature">function <strong>getAssetContractAddress</strong><span>() </span><span>public </span><span>view </span><span>returns  (address) </span></code><hr/><div class="description"><p>View function to fetch the address of asset contract.</p></div><dl><dt><span class="label-return">Returns:</span></dt><dd>address of that asset contract</dd></dl></div></div></li><li><div class="item function"><span id="getContractBalance" class="anchor-marker"></span><h4 class="name">getContractBalance</h4><div class="body"><code class="signature">function <strong>getContractBalance</strong><span>() </span><span>public </span><span>view </span><span>returns  (uint) </span></code><hr/><div class="description"><p>Function to check contract balance of specified ERC20 tokens.</p></div><dl><dt><span class="label-return">Returns:</span></dt><dd>balance</dd></dl></div></div></li><li><div class="item function"><span id="moveFungibleAsset" class="anchor-marker"></span><h4 class="name">moveFungibleAsset</h4><div class="body"><code class="signature">function <strong>moveFungibleAsset</strong><span>(address _to, uint256 _amount) </span><span>internal </span><span>returns  (bool) </span></code><hr/><div class="description"><p>Internal function, Move some amount of ERC20 from our campaignInventoryUnitsBalance to someone.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_to</code> - address we&#x27;re sending the amount of ERC20</div><div><code>_amount</code> - is the amount of ERC20&#x27;s we&#x27;re going to transfer</div></dd><dt><span class="label-return">Returns:</span></dt><dd>true if successful, otherwise reverts</dd></dl></div></div></li><li><div class="item function"><span id="redeemTwoKeyToken" class="anchor-marker"></span><h4 class="name">redeemTwoKeyToken</h4><div class="body"><code class="signature">function <strong>redeemTwoKeyToken</strong><span>(uint256 _amount) </span><span>public </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_amount</code> - uint256</div></dd></dl></div></div></li><li><div class="item function"><span id="transferAssetTwoKeyToken" class="anchor-marker"></span><h4 class="name">transferAssetTwoKeyToken</h4><div class="body"><code class="signature">function <strong>transferAssetTwoKeyToken</strong><span>(uint256 _tokenID, address _assetContract, uint256 _amount) </span><span>public </span></code><hr/><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="2key_TwoKeyAcquisitionCampaignERC20.html#isWhitelistedConverter">isWhitelistedConverter </a><a href="2key_TwoKeyAcquisitionCampaignERC20.html#didConverterConvert">didConverterConvert </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_tokenID</code> - uint256</div><div><code>_assetContract</code> - address</div><div><code>_amount</code> - uint256</div></dd></dl></div></div></li><li><div class="item function"><span id="transferFungibleAsset" class="anchor-marker"></span><h4 class="name">transferFungibleAsset</h4><div class="body"><code class="signature">function <strong>transferFungibleAsset</strong><span>(address _to, uint256 _amount) </span><span>internal </span><span>returns  (bool) </span></code><hr/><div class="description"><p>Function which will transfer fungible assets from contract to someone.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_to</code> - is the address we&#x27;re sending the fungible assets</div><div><code>_amount</code> - is the amount of ERC20 we&#x27;re going to transfer</div></dd><dt><span class="label-return">Returns:</span></dt><dd>true if trasaction completes otherwise transaction will revert</dd></dl></div></div></li></ul></div></div></div>
