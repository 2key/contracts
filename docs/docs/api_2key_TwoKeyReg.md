---
id: 2key_TwoKeyReg
title: TwoKeyReg
---

<div class="contract-doc"><div class="contract"><h2 class="contract-header"><span class="contract-kind">contract</span> TwoKeyReg</h2><p class="base-contracts"><span>is</span> <a href="openzeppelin-solidity_contracts_ownership_Ownable.html">Ownable</a><span>, </span><a href="2key_RBACWithAdmin.html">RBACWithAdmin</a></p><div class="source">Source: <a href="git+https://github.com/2keynet/web3-alpha/blob/v0.0.1/contracts/2key/TwoKeyReg.sol" target="_blank">2key/TwoKeyReg.sol</a></div></div><div class="index"><h2>Index</h2><ul><li><a href="2key_TwoKeyReg.html#UserNameChanged">UserNameChanged</a></li><li><a href="2key_TwoKeyReg.html#addName">addName</a></li><li><a href="2key_TwoKeyReg.html#addNameByUser">addNameByUser</a></li><li><a href="2key_TwoKeyReg.html#addWhereContractor">addWhereContractor</a></li><li><a href="2key_TwoKeyReg.html#addWhereConverter">addWhereConverter</a></li><li><a href="2key_TwoKeyReg.html#addWhereModerator">addWhereModerator</a></li><li><a href="2key_TwoKeyReg.html#addWhereReferrer">addWhereReferrer</a></li><li><a href="2key_TwoKeyReg.html#changeTwoKeyEventSource">changeTwoKeyEventSource</a></li><li><a href="2key_TwoKeyReg.html#">fallback</a></li><li><a href="2key_TwoKeyReg.html#getContractsWhereUserIsContractor">getContractsWhereUserIsContractor</a></li><li><a href="2key_TwoKeyReg.html#getContractsWhereUserIsConverter">getContractsWhereUserIsConverter</a></li><li><a href="2key_TwoKeyReg.html#getContractsWhereUserIsModerator">getContractsWhereUserIsModerator</a></li><li><a href="2key_TwoKeyReg.html#getContractsWhereUserIsReferrer">getContractsWhereUserIsReferrer</a></li><li><a href="2key_TwoKeyReg.html#getName2Owner">getName2Owner</a></li><li><a href="2key_TwoKeyReg.html#getOwner2Name">getOwner2Name</a></li><li><a href="2key_TwoKeyReg.html#getTwoKeyEventSourceAddress">getTwoKeyEventSourceAddress</a></li><li><a href="2key_TwoKeyReg.html#onlyTwoKeyAuthorized">onlyTwoKeyAuthorized</a></li><li><a href="2key_TwoKeyReg.html#onlyTwoKeyEventSource">onlyTwoKeyEventSource</a></li></ul></div><div class="reference"><h2>Reference</h2><div class="events"><h3>Events</h3><ul><li><div class="item event"><span id="UserNameChanged" class="anchor-marker"></span><h4 class="name">UserNameChanged</h4><div class="body"><code class="signature">event <strong>UserNameChanged</strong><span>(address owner, string name) </span></code><hr/><div class="description"><p>Event is emitted when a user&#x27;s name is changed.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>owner</code> - address</div><div><code>name</code> - string</div></dd></dl></div></div></li></ul></div><div class="modifiers"><h3>Modifiers</h3><ul><li><div class="item modifier"><span id="onlyTwoKeyAuthorized" class="anchor-marker"></span><h4 class="name">onlyTwoKeyAuthorized</h4><div class="body"><code class="signature">modifier <strong>onlyTwoKeyAuthorized</strong><span>() </span></code><hr/><div class="description"><p>TODO: (Amit) Put this modifier on methods where required Modifier which will allow only 2keyAdmin or maintener to invoke function calls.</p></div></div></div></li><li><div class="item modifier"><span id="onlyTwoKeyEventSource" class="anchor-marker"></span><h4 class="name">onlyTwoKeyEventSource</h4><div class="body"><code class="signature">modifier <strong>onlyTwoKeyEventSource</strong><span>() </span></code><hr/><div class="description"><p>Modifier which will allow only 2key event source to issue calls on selected methods.</p></div></div></div></li></ul></div><div class="functions"><h3>Functions</h3><ul><li><div class="item function"><span id="addName" class="anchor-marker"></span><h4 class="name">addName</h4><div class="body"><code class="signature">function <strong>addName</strong><span>(string _name, address _sender) </span><span>public </span></code><hr/><div class="description"><p>Function where only admin can add a name - address pair.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="2key_RBACWithAdmin.html#onlyAdmin">onlyAdmin </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_name</code> - is name of user</div><div><code>_sender</code> - is address of user</div></dd></dl></div></div></li><li><div class="item function"><span id="addNameByUser" class="anchor-marker"></span><h4 class="name">addNameByUser</h4><div class="body"><code class="signature">function <strong>addNameByUser</strong><span>(string _name) </span><span>public </span></code><hr/><div class="description"><p>Function where user can add name to his address.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_name</code> - is name of user</div></dd></dl></div></div></li><li><div class="item function"><span id="addWhereContractor" class="anchor-marker"></span><h4 class="name">addWhereContractor</h4><div class="body"><code class="signature">function <strong>addWhereContractor</strong><span>(address _userAddress, address _contractAddress) </span><span>public </span></code><hr/><div class="description"><p>Only TwoKeyEventSource contract can issue this calls, We&#x27;re requiring the contract address different address 0 because it needs to be deployed, Function to add new campaign contract where user is contractor.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_userAddress</code> - is address of contractor</div><div><code>_contractAddress</code> - is address of deployed campaign contract commented modifier onlyTwoKeyEventSource</div></dd></dl></div></div></li><li><div class="item function"><span id="addWhereConverter" class="anchor-marker"></span><h4 class="name">addWhereConverter</h4><div class="body"><code class="signature">function <strong>addWhereConverter</strong><span>(address _userAddress, address _contractAddress) </span><span>public </span></code><hr/><div class="description"><p>Only TwoKeyEventSource contract can issue this calls, We&#x27;re requiring the contract address different address 0 because it needs to be deployed, Function to add new campaign contract where user is converter.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="2key_TwoKeyReg.html#onlyTwoKeyEventSource">onlyTwoKeyEventSource </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_userAddress</code> - is address of converter</div><div><code>_contractAddress</code> - is address of deployed campaign contract</div></dd></dl></div></div></li><li><div class="item function"><span id="addWhereModerator" class="anchor-marker"></span><h4 class="name">addWhereModerator</h4><div class="body"><code class="signature">function <strong>addWhereModerator</strong><span>(address _userAddress, address _contractAddress) </span><span>public </span></code><hr/><div class="description"><p>Only TwoKeyEventSource contract can issue this calls, We&#x27;re requiring the contract address different address 0 because it needs to be deployed, Function to add new campaign contract where user is moderator.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="2key_TwoKeyReg.html#onlyTwoKeyEventSource">onlyTwoKeyEventSource </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_userAddress</code> - is address of moderator</div><div><code>_contractAddress</code> - is address of deployed campaign contract</div></dd></dl></div></div></li><li><div class="item function"><span id="addWhereReferrer" class="anchor-marker"></span><h4 class="name">addWhereReferrer</h4><div class="body"><code class="signature">function <strong>addWhereReferrer</strong><span>(address _userAddress, address _contractAddress) </span><span>public </span></code><hr/><div class="description"><p>Only TwoKeyEventSource contract can issue this calls, We&#x27;re requiring the contract address different address 0 because it needs to be deployed, Function to add new campaign contract where user is refferer.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="2key_TwoKeyReg.html#onlyTwoKeyEventSource">onlyTwoKeyEventSource </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_userAddress</code> - is address of refferer</div><div><code>_contractAddress</code> - is address of deployed campaign contract</div></dd></dl></div></div></li><li><div class="item function"><span id="changeTwoKeyEventSource" class="anchor-marker"></span><h4 class="name">changeTwoKeyEventSource</h4><div class="body"><code class="signature">function <strong>changeTwoKeyEventSource</strong><span>(address _twoKeyEventSource) </span><span>public </span></code><hr/><div class="description"><p>Method to change the allowed TwoKeyEventSource contract address.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="openzeppelin-solidity_contracts_ownership_Ownable.html#onlyOwner">onlyOwner </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_twoKeyEventSource</code> - new TwoKeyEventSource contract address</div></dd></dl></div></div></li><li><div class="item function"><span id="fallback" class="anchor-marker"></span><h4 class="name">fallback</h4><div class="body"><code class="signature">function <strong></strong><span>(address _twoKeyEventSource, address _twoKeyAdmin) </span><span>public </span></code><hr/><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_twoKeyEventSource</code> - address</div><div><code>_twoKeyAdmin</code> - address</div></dd></dl></div></div></li><li><div class="item function"><span id="getContractsWhereUserIsContractor" class="anchor-marker"></span><h4 class="name">getContractsWhereUserIsContractor</h4><div class="body"><code class="signature">function <strong>getContractsWhereUserIsContractor</strong><span>(address _userAddress) </span><span>public </span><span>view </span><span>returns  (address[]) </span></code><hr/><div class="description"><p>View function - doesn&#x27;t cost any gas to be executed, Function to fetch all campaign contracts where user is contractor.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_userAddress</code> - is address of user</div></dd><dt><span class="label-return">Returns:</span></dt><dd>array of addresses (campaign contracts)</dd></dl></div></div></li><li><div class="item function"><span id="getContractsWhereUserIsConverter" class="anchor-marker"></span><h4 class="name">getContractsWhereUserIsConverter</h4><div class="body"><code class="signature">function <strong>getContractsWhereUserIsConverter</strong><span>(address _userAddress) </span><span>public </span><span>view </span><span>returns  (address[]) </span></code><hr/><div class="description"><p>View function - doesn&#x27;t cost any gas to be executed, Function to fetch all campaign contracts where user is converter.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_userAddress</code> - is address of user</div></dd><dt><span class="label-return">Returns:</span></dt><dd>array of addresses (campaign contracts)</dd></dl></div></div></li><li><div class="item function"><span id="getContractsWhereUserIsModerator" class="anchor-marker"></span><h4 class="name">getContractsWhereUserIsModerator</h4><div class="body"><code class="signature">function <strong>getContractsWhereUserIsModerator</strong><span>(address _userAddress) </span><span>public </span><span>view </span><span>returns  (address[]) </span></code><hr/><div class="description"><p>View function - doesn&#x27;t cost any gas to be executed, Function to fetch all campaign contracts where user is moderator.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_userAddress</code> - is address of user</div></dd><dt><span class="label-return">Returns:</span></dt><dd>array of addresses (campaign contracts)</dd></dl></div></div></li><li><div class="item function"><span id="getContractsWhereUserIsReferrer" class="anchor-marker"></span><h4 class="name">getContractsWhereUserIsReferrer</h4><div class="body"><code class="signature">function <strong>getContractsWhereUserIsReferrer</strong><span>(address _userAddress) </span><span>public </span><span>view </span><span>returns  (address[]) </span></code><hr/><div class="description"><p>View function - doesn&#x27;t cost any gas to be executed, Function to fetch all campaign contracts where user is refferer.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_userAddress</code> - is address of user</div></dd><dt><span class="label-return">Returns:</span></dt><dd>array of addresses (campaign contracts)</dd></dl></div></div></li><li><div class="item function"><span id="getName2Owner" class="anchor-marker"></span><h4 class="name">getName2Owner</h4><div class="body"><code class="signature">function <strong>getName2Owner</strong><span>(string _name) </span><span>public </span><span>view </span><span>returns  (address) </span></code><hr/><div class="description"><p>View function - doesn&#x27;t cost any gas to be executed, Function to fetch address of the user that corresponds to given name.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_name</code> - is name of user</div></dd><dt><span class="label-return">Returns:</span></dt><dd>address of the user as type address</dd></dl></div></div></li><li><div class="item function"><span id="getOwner2Name" class="anchor-marker"></span><h4 class="name">getOwner2Name</h4><div class="body"><code class="signature">function <strong>getOwner2Name</strong><span>(address _sender) </span><span>public </span><span>view </span><span>returns  (string) </span></code><hr/><div class="description"><p>View function - doesn&#x27;t cost any gas to be executed, Function to fetch name that corresponds to the address.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_sender</code> - is address of user</div></dd><dt><span class="label-return">Returns:</span></dt><dd>name of the user as type string</dd></dl></div></div></li><li><div class="item function"><span id="getTwoKeyEventSourceAddress" class="anchor-marker"></span><h4 class="name">getTwoKeyEventSourceAddress</h4><div class="body"><code class="signature">function <strong>getTwoKeyEventSourceAddress</strong><span>() </span><span>public </span><span>view </span><span>returns  (address) </span></code><hr/><div class="description"><p>View function to return address of current active twoKeyEventSource contract, Function to fetch twoKeyEventSource contract address.</p></div><dl><dt><span class="label-return">Returns:</span></dt><dd>address</dd></dl></div></div></li></ul></div></div></div>
