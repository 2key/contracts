---
id: 2key_singleton-contracts_TwoKeyRegistry
title: TwoKeyRegistry
---

<div class="contract-doc"><div class="contract"><h2 class="contract-header"><span class="contract-kind">contract</span> TwoKeyRegistry</h2><p class="base-contracts"><span>is</span> <a href="2key_Upgradeable.html">Upgradeable</a><span>, </span><a href="2key_MaintainingPattern.html">MaintainingPattern</a></p><div class="source">Source: <a href="git+https://github.com/2keynet/web3-alpha/blob/v0.0.3/contracts/2key/singleton-contracts/TwoKeyRegistry.sol" target="_blank">2key/singleton-contracts/TwoKeyRegistry.sol</a></div></div><div class="index"><h2>Index</h2><ul><li><a href="2key_singleton-contracts_TwoKeyRegistry.html#UserNameChanged">UserNameChanged</a></li><li><a href="2key_singleton-contracts_TwoKeyRegistry.html#addName">addName</a></li><li><a href="2key_singleton-contracts_TwoKeyRegistry.html#addNameAndSetWalletName">addNameAndSetWalletName</a></li><li><a href="2key_singleton-contracts_TwoKeyRegistry.html#addNameInternal">addNameInternal</a></li><li><a href="2key_singleton-contracts_TwoKeyRegistry.html#addNameSigned">addNameSigned</a></li><li><a href="2key_singleton-contracts_TwoKeyRegistry.html#addPlasma2EthereumByUser">addPlasma2EthereumByUser</a></li><li><a href="2key_singleton-contracts_TwoKeyRegistry.html#addWhereContractor">addWhereContractor</a></li><li><a href="2key_singleton-contracts_TwoKeyRegistry.html#addWhereConverter">addWhereConverter</a></li><li><a href="2key_singleton-contracts_TwoKeyRegistry.html#addWhereModerator">addWhereModerator</a></li><li><a href="2key_singleton-contracts_TwoKeyRegistry.html#addWhereReferrer">addWhereReferrer</a></li><li><a href="2key_singleton-contracts_TwoKeyRegistry.html#checkIfUserExists">checkIfUserExists</a></li><li><a href="2key_singleton-contracts_TwoKeyRegistry.html#deleteUser">deleteUser</a></li><li><a href="2key_singleton-contracts_TwoKeyRegistry.html#getContractsWhereUserIsContractor">getContractsWhereUserIsContractor</a></li><li><a href="2key_singleton-contracts_TwoKeyRegistry.html#getContractsWhereUserIsConverter">getContractsWhereUserIsConverter</a></li><li><a href="2key_singleton-contracts_TwoKeyRegistry.html#getContractsWhereUserIsModerator">getContractsWhereUserIsModerator</a></li><li><a href="2key_singleton-contracts_TwoKeyRegistry.html#getContractsWhereUserIsReferrer">getContractsWhereUserIsReferrer</a></li><li><a href="2key_singleton-contracts_TwoKeyRegistry.html#getEthereumToPlasma">getEthereumToPlasma</a></li><li><a href="2key_singleton-contracts_TwoKeyRegistry.html#getPlasmaToEthereum">getPlasmaToEthereum</a></li><li><a href="2key_singleton-contracts_TwoKeyRegistry.html#getUserAddress2UserName">getUserAddress2UserName</a></li><li><a href="2key_singleton-contracts_TwoKeyRegistry.html#getUserData">getUserData</a></li><li><a href="2key_singleton-contracts_TwoKeyRegistry.html#getUserName2UserAddress">getUserName2UserAddress</a></li><li><a href="2key_singleton-contracts_TwoKeyRegistry.html#onlyTwoKeyEventSource">onlyTwoKeyEventSource</a></li><li><a href="2key_singleton-contracts_TwoKeyRegistry.html#setInitialParams">setInitialParams</a></li><li><a href="2key_singleton-contracts_TwoKeyRegistry.html#setNoteByUser">setNoteByUser</a></li><li><a href="2key_singleton-contracts_TwoKeyRegistry.html#setPlasma2EthereumAndNoteSigned">setPlasma2EthereumAndNoteSigned</a></li><li><a href="2key_singleton-contracts_TwoKeyRegistry.html#setWalletName">setWalletName</a></li><li><a href="2key_singleton-contracts_TwoKeyRegistry.html#strConcat">strConcat</a></li><li><a href="2key_singleton-contracts_TwoKeyRegistry.html#stringToBytes32">stringToBytes32</a></li></ul></div><div class="reference"><h2>Reference</h2><div class="events"><h3>Events</h3><ul><li><div class="item event"><span id="UserNameChanged" class="anchor-marker"></span><h4 class="name">UserNameChanged</h4><div class="body"><code class="signature">event <strong>UserNameChanged</strong><span>(address owner, string name) </span></code><hr/><div class="description"><p>Event is emitted when a user&#x27;s name is changed.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>owner</code> - address</div><div><code>name</code> - string</div></dd></dl></div></div></li></ul></div><div class="modifiers"><h3>Modifiers</h3><ul><li><div class="item modifier"><span id="onlyTwoKeyEventSource" class="anchor-marker"></span><h4 class="name">onlyTwoKeyEventSource</h4><div class="body"><code class="signature">modifier <strong>onlyTwoKeyEventSource</strong><span>() </span></code><hr/><div class="description"><p>Modifier which will allow only 2key event source to issue calls on selected methods.</p></div></div></div></li></ul></div><div class="functions"><h3>Functions</h3><ul><li><div class="item function"><span id="addName" class="anchor-marker"></span><h4 class="name">addName</h4><div class="body"><code class="signature">function <strong>addName</strong><span>(string _name, address _sender, string _fullName, string _email, bytes signature) </span><span>public </span></code><hr/><div class="description"><p>Function where only admin can add a name - address pair.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_name</code> - is name of user</div><div><code>_sender</code> - is address of user</div><div><code>_fullName</code> - string</div><div><code>_email</code> - string</div><div><code>signature</code> - bytes</div></dd></dl></div></div></li><li><div class="item function"><span id="addNameAndSetWalletName" class="anchor-marker"></span><h4 class="name">addNameAndSetWalletName</h4><div class="body"><code class="signature">function <strong>addNameAndSetWalletName</strong><span>(string _name, address _sender, string _fullName, string _email, string _username_walletName, bytes _signatureName, bytes _signatureWalletName) </span><span>public </span></code><hr/><div class="description"><p>Function to concat this 2 functions at once.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="2key_MaintainingPattern.html#onlyMaintainer">onlyMaintainer </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_name</code> - string</div><div><code>_sender</code> - address</div><div><code>_fullName</code> - string</div><div><code>_email</code> - string</div><div><code>_username_walletName</code> - string</div><div><code>_signatureName</code> - bytes</div><div><code>_signatureWalletName</code> - bytes</div></dd></dl></div></div></li><li><div class="item function"><span id="addNameInternal" class="anchor-marker"></span><h4 class="name">addNameInternal</h4><div class="body"><code class="signature">function <strong>addNameInternal</strong><span>(string _name, address _sender) </span><span>internal </span></code><hr/><div class="description"><p>Private function, Function where new name/address pair is added or an old address is updated with new name.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_name</code> - is name of user</div><div><code>_sender</code> - is address of user</div></dd></dl></div></div></li><li><div class="item function"><span id="addNameSigned" class="anchor-marker"></span><h4 class="name">addNameSigned</h4><div class="body"><code class="signature">function <strong>addNameSigned</strong><span>(string _name, bytes external_sig) </span><span>public </span></code><hr/><div class="description"><p>Add signed name.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_name</code> - is the name</div><div><code>external_sig</code> - is the external signature</div></dd></dl></div></div></li><li><div class="item function"><span id="addPlasma2EthereumByUser" class="anchor-marker"></span><h4 class="name">addPlasma2EthereumByUser</h4><div class="body"><code class="signature">function <strong>addPlasma2EthereumByUser</strong><span>(bytes sig) </span><span>public </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>sig</code> - bytes</div></dd></dl></div></div></li><li><div class="item function"><span id="addWhereContractor" class="anchor-marker"></span><h4 class="name">addWhereContractor</h4><div class="body"><code class="signature">function <strong>addWhereContractor</strong><span>(address _userAddress, address _contractAddress) </span><span>external </span></code><hr/><div class="description"><p>Only TwoKeyEventSource contract can issue this calls, We&#x27;re requiring the contract address different address 0 because it needs to be deployed, Function to add new campaign contract where user is contractor.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="2key_singleton-contracts_TwoKeyRegistry.html#onlyTwoKeyEventSource">onlyTwoKeyEventSource </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_userAddress</code> - is address of contractor</div><div><code>_contractAddress</code> - is address of deployed campaign contract</div></dd></dl></div></div></li><li><div class="item function"><span id="addWhereConverter" class="anchor-marker"></span><h4 class="name">addWhereConverter</h4><div class="body"><code class="signature">function <strong>addWhereConverter</strong><span>(address _userAddress, address _contractAddress) </span><span>external </span></code><hr/><div class="description"><p>Only TwoKeyEventSource contract can issue this calls, We&#x27;re requiring the contract address different address 0 because it needs to be deployed, Function to add new campaign contract where user is converter.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="2key_singleton-contracts_TwoKeyRegistry.html#onlyTwoKeyEventSource">onlyTwoKeyEventSource </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_userAddress</code> - is address of converter</div><div><code>_contractAddress</code> - is address of deployed campaign contract</div></dd></dl></div></div></li><li><div class="item function"><span id="addWhereModerator" class="anchor-marker"></span><h4 class="name">addWhereModerator</h4><div class="body"><code class="signature">function <strong>addWhereModerator</strong><span>(address _userAddress, address _contractAddress) </span><span>external </span></code><hr/><div class="description"><p>Only TwoKeyEventSource contract can issue this calls, We&#x27;re requiring the contract address different address 0 because it needs to be deployed, Function to add new campaign contract where user is moderator.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="2key_singleton-contracts_TwoKeyRegistry.html#onlyTwoKeyEventSource">onlyTwoKeyEventSource </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_userAddress</code> - is address of moderator</div><div><code>_contractAddress</code> - is address of deployed campaign contract</div></dd></dl></div></div></li><li><div class="item function"><span id="addWhereReferrer" class="anchor-marker"></span><h4 class="name">addWhereReferrer</h4><div class="body"><code class="signature">function <strong>addWhereReferrer</strong><span>(address _userAddress, address _contractAddress) </span><span>external </span></code><hr/><div class="description"><p>Only TwoKeyEventSource contract can issue this calls, We&#x27;re requiring the contract address different address 0 because it needs to be deployed, Function to add new campaign contract where user is refferer.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="2key_singleton-contracts_TwoKeyRegistry.html#onlyTwoKeyEventSource">onlyTwoKeyEventSource </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_userAddress</code> - is address of refferer</div><div><code>_contractAddress</code> - is address of deployed campaign contract</div></dd></dl></div></div></li><li><div class="item function"><span id="checkIfUserExists" class="anchor-marker"></span><h4 class="name">checkIfUserExists</h4><div class="body"><code class="signature">function <strong>checkIfUserExists</strong><span>(address _userAddress) </span><span>external </span><span>view </span><span>returns  (bool) </span></code><hr/><div class="description"><p>Function to check if the user exists.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_userAddress</code> - is the address of the user</div></dd><dt><span class="label-return">Returns:</span></dt><dd>true if exists otherwise false</dd></dl></div></div></li><li><div class="item function"><span id="deleteUser" class="anchor-marker"></span><h4 class="name">deleteUser</h4><div class="body"><code class="signature">function <strong>deleteUser</strong><span>(string userName) </span><span>public </span></code><hr/><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="2key_MaintainingPattern.html#onlyMaintainer">onlyMaintainer </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>userName</code> - string</div></dd></dl></div></div></li><li><div class="item function"><span id="getContractsWhereUserIsContractor" class="anchor-marker"></span><h4 class="name">getContractsWhereUserIsContractor</h4><div class="body"><code class="signature">function <strong>getContractsWhereUserIsContractor</strong><span>(address _userAddress) </span><span>external </span><span>view </span><span>returns  (address[]) </span></code><hr/><div class="description"><p>View function - doesn&#x27;t cost any gas to be executed, Function to fetch all campaign contracts where user is contractor.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_userAddress</code> - is address of user</div></dd><dt><span class="label-return">Returns:</span></dt><dd>array of addresses (campaign contracts)</dd></dl></div></div></li><li><div class="item function"><span id="getContractsWhereUserIsConverter" class="anchor-marker"></span><h4 class="name">getContractsWhereUserIsConverter</h4><div class="body"><code class="signature">function <strong>getContractsWhereUserIsConverter</strong><span>(address _userAddress) </span><span>external </span><span>view </span><span>returns  (address[]) </span></code><hr/><div class="description"><p>View function - doesn&#x27;t cost any gas to be executed, Function to fetch all campaign contracts where user is converter.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_userAddress</code> - is address of user</div></dd><dt><span class="label-return">Returns:</span></dt><dd>array of addresses (campaign contracts)</dd></dl></div></div></li><li><div class="item function"><span id="getContractsWhereUserIsModerator" class="anchor-marker"></span><h4 class="name">getContractsWhereUserIsModerator</h4><div class="body"><code class="signature">function <strong>getContractsWhereUserIsModerator</strong><span>(address _userAddress) </span><span>external </span><span>view </span><span>returns  (address[]) </span></code><hr/><div class="description"><p>View function - doesn&#x27;t cost any gas to be executed, Function to fetch all campaign contracts where user is moderator.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_userAddress</code> - is address of user</div></dd><dt><span class="label-return">Returns:</span></dt><dd>array of addresses (campaign contracts)</dd></dl></div></div></li><li><div class="item function"><span id="getContractsWhereUserIsReferrer" class="anchor-marker"></span><h4 class="name">getContractsWhereUserIsReferrer</h4><div class="body"><code class="signature">function <strong>getContractsWhereUserIsReferrer</strong><span>(address _userAddress) </span><span>external </span><span>view </span><span>returns  (address[]) </span></code><hr/><div class="description"><p>View function - doesn&#x27;t cost any gas to be executed, Function to fetch all campaign contracts where user is refferer.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_userAddress</code> - is address of user</div></dd><dt><span class="label-return">Returns:</span></dt><dd>array of addresses (campaign contracts)</dd></dl></div></div></li><li><div class="item function"><span id="getEthereumToPlasma" class="anchor-marker"></span><h4 class="name">getEthereumToPlasma</h4><div class="body"><code class="signature">function <strong>getEthereumToPlasma</strong><span>(address ethereum) </span><span>public </span><span>view </span><span>returns  (address) </span></code><hr/><div class="description"><p>Reading from mapping plasma 2 ethereum.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>ethereum</code> - is the ethereum address we&#x27;re searching plasma address for</div></dd><dt><span class="label-return">Returns:</span></dt><dd>plasma address if exist otherwise 0x0 (address(0))</dd></dl></div></div></li><li><div class="item function"><span id="getPlasmaToEthereum" class="anchor-marker"></span><h4 class="name">getPlasmaToEthereum</h4><div class="body"><code class="signature">function <strong>getPlasmaToEthereum</strong><span>(address plasma) </span><span>public </span><span>view </span><span>returns  (address) </span></code><hr/><div class="description"><p>Reading from mapping ethereum 2 plasma.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>plasma</code> - is the plasma address we&#x27;re searching eth address for</div></dd><dt><span class="label-return">Returns:</span></dt><dd>ethereum address if exist otherwise 0x0 (address(0))</dd></dl></div></div></li><li><div class="item function"><span id="getUserAddress2UserName" class="anchor-marker"></span><h4 class="name">getUserAddress2UserName</h4><div class="body"><code class="signature">function <strong>getUserAddress2UserName</strong><span>(address _sender) </span><span>external </span><span>view </span><span>returns  (string) </span></code><hr/><div class="description"><p>View function - doesn&#x27;t cost any gas to be executed, Function to fetch name that corresponds to the address.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_sender</code> - is address of user</div></dd><dt><span class="label-return">Returns:</span></dt><dd>name of the user as type string</dd></dl></div></div></li><li><div class="item function"><span id="getUserData" class="anchor-marker"></span><h4 class="name">getUserData</h4><div class="body"><code class="signature">function <strong>getUserData</strong><span>(address _user) </span><span>external </span><span>view </span><span>returns  (bytes) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_user</code> - address</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bytes</dd></dl></div></div></li><li><div class="item function"><span id="getUserName2UserAddress" class="anchor-marker"></span><h4 class="name">getUserName2UserAddress</h4><div class="body"><code class="signature">function <strong>getUserName2UserAddress</strong><span>(string _name) </span><span>external </span><span>view </span><span>returns  (address) </span></code><hr/><div class="description"><p>View function - doesn&#x27;t cost any gas to be executed, Function to fetch address of the user that corresponds to given name.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_name</code> - is name of user</div></dd><dt><span class="label-return">Returns:</span></dt><dd>address of the user as type address</dd></dl></div></div></li><li><div class="item function"><span id="setInitialParams" class="anchor-marker"></span><h4 class="name">setInitialParams</h4><div class="body"><code class="signature">function <strong>setInitialParams</strong><span>(address _twoKeyEventSource, address _twoKeyAdmin, address[] _maintainers) </span><span>external </span></code><hr/><div class="description"><p>Function which can be called only once.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_twoKeyEventSource</code> - is the address of twoKeyEventSource contract</div><div><code>_twoKeyAdmin</code> - is the address of twoKeyAdmin contract</div><div><code>_maintainers</code> - is the address of initial maintainer</div></dd></dl></div></div></li><li><div class="item function"><span id="setNoteByUser" class="anchor-marker"></span><h4 class="name">setNoteByUser</h4><div class="body"><code class="signature">function <strong>setNoteByUser</strong><span>(bytes note) </span><span>public </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>note</code> - bytes</div></dd></dl></div></div></li><li><div class="item function"><span id="setPlasma2EthereumAndNoteSigned" class="anchor-marker"></span><h4 class="name">setPlasma2EthereumAndNoteSigned</h4><div class="body"><code class="signature">function <strong>setPlasma2EthereumAndNoteSigned</strong><span>(bytes sig, bytes note, bytes external_sig) </span><span>public </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>sig</code> - bytes</div><div><code>note</code> - bytes</div><div><code>external_sig</code> - bytes</div></dd></dl></div></div></li><li><div class="item function"><span id="setWalletName" class="anchor-marker"></span><h4 class="name">setWalletName</h4><div class="body"><code class="signature">function <strong>setWalletName</strong><span>(string username, address _address, string _username_walletName, bytes signature) </span><span>public </span></code><hr/><div class="description"><p>Function where TwoKeyMaintainer can add walletname to address.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>username</code> - is the username of the user we want to update map for</div><div><code>_address</code> - is the address of the user we want to update map for</div><div><code>_username_walletName</code> - is the concatenated username + &#x27;_&#x27; + walletName, since sending from trusted provider no need to validate</div><div><code>signature</code> - bytes</div></dd></dl></div></div></li><li><div class="item function"><span id="strConcat" class="anchor-marker"></span><h4 class="name">strConcat</h4><div class="body"><code class="signature">function <strong>strConcat</strong><span>(string _a, string _b, string _c) </span><span>public </span><span>pure </span><span>returns  (string) </span></code><hr/><div class="description"><p>If you want to handle concatenation of less than 5, then pass first their values and for the left pass empty strings, Function to concat at most 5 strings.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_a</code> - string</div><div><code>_b</code> - string</div><div><code>_c</code> - string</div></dd><dt><span class="label-return">Returns:</span></dt><dd>string concatenated</dd></dl></div></div></li><li><div class="item function"><span id="stringToBytes32" class="anchor-marker"></span><h4 class="name">stringToBytes32</h4><div class="body"><code class="signature">function <strong>stringToBytes32</strong><span>(string source) </span><span>internal </span><span>pure </span><span>returns  (bytes32) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>source</code> - string</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bytes32</dd></dl></div></div></li></ul></div></div></div>
