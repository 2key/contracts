---
id: 2key_TwoKeyRegistry
title: TwoKeyRegistry
---

<div class="contract-doc"><div class="contract"><h2 class="contract-header"><span class="contract-kind">contract</span> TwoKeyRegistry</h2><p class="base-contracts"><span>is</span> <a href="2key_Upgradeable.html">Upgradeable</a></p><div class="source">Source: <a href="git+https://github.com/2keynet/web3-alpha/blob/v0.0.3/contracts/2key/TwoKeyRegistry.sol" target="_blank">2key/TwoKeyRegistry.sol</a></div></div><div class="index"><h2>Index</h2><ul><li><a href="2key_TwoKeyRegistry.html#UserNameChanged">UserNameChanged</a></li><li><a href="2key_TwoKeyRegistry.html#addName">addName</a></li><li><a href="2key_TwoKeyRegistry.html#addNameByUser">addNameByUser</a></li><li><a href="2key_TwoKeyRegistry.html#addNameSigned">addNameSigned</a></li><li><a href="2key_TwoKeyRegistry.html#addPlasma2EthereumByUser">addPlasma2EthereumByUser</a></li><li><a href="2key_TwoKeyRegistry.html#addTwoKeyMaintainer">addTwoKeyMaintainer</a></li><li><a href="2key_TwoKeyRegistry.html#addWhereContractor">addWhereContractor</a></li><li><a href="2key_TwoKeyRegistry.html#addWhereConverter">addWhereConverter</a></li><li><a href="2key_TwoKeyRegistry.html#addWhereModerator">addWhereModerator</a></li><li><a href="2key_TwoKeyRegistry.html#addWhereReferrer">addWhereReferrer</a></li><li><a href="2key_TwoKeyRegistry.html#checkIfTwoKeyMaintainerExists">checkIfTwoKeyMaintainerExists</a></li><li><a href="2key_TwoKeyRegistry.html#checkIfUserExists">checkIfUserExists</a></li><li><a href="2key_TwoKeyRegistry.html#getContractsWhereUserIsContractor">getContractsWhereUserIsContractor</a></li><li><a href="2key_TwoKeyRegistry.html#getContractsWhereUserIsConverter">getContractsWhereUserIsConverter</a></li><li><a href="2key_TwoKeyRegistry.html#getContractsWhereUserIsModerator">getContractsWhereUserIsModerator</a></li><li><a href="2key_TwoKeyRegistry.html#getContractsWhereUserIsReferrer">getContractsWhereUserIsReferrer</a></li><li><a href="2key_TwoKeyRegistry.html#getEthereumToPlasma">getEthereumToPlasma</a></li><li><a href="2key_TwoKeyRegistry.html#getHistoryOfChangedAddresses">getHistoryOfChangedAddresses</a></li><li><a href="2key_TwoKeyRegistry.html#getPlasmaToEthereum">getPlasmaToEthereum</a></li><li><a href="2key_TwoKeyRegistry.html#getUserAddress2UserName">getUserAddress2UserName</a></li><li><a href="2key_TwoKeyRegistry.html#getUserData">getUserData</a></li><li><a href="2key_TwoKeyRegistry.html#getUserName2UserAddress">getUserName2UserAddress</a></li><li><a href="2key_TwoKeyRegistry.html#onlyAdmin">onlyAdmin</a></li><li><a href="2key_TwoKeyRegistry.html#onlyTwoKeyAuthorized">onlyTwoKeyAuthorized</a></li><li><a href="2key_TwoKeyRegistry.html#onlyTwoKeyEventSource">onlyTwoKeyEventSource</a></li><li><a href="2key_TwoKeyRegistry.html#onlyTwoKeyMaintainer">onlyTwoKeyMaintainer</a></li><li><a href="2key_TwoKeyRegistry.html#removeTwoKeyMaintainer">removeTwoKeyMaintainer</a></li><li><a href="2key_TwoKeyRegistry.html#setInitialParams">setInitialParams</a></li><li><a href="2key_TwoKeyRegistry.html#setNoteByUser">setNoteByUser</a></li><li><a href="2key_TwoKeyRegistry.html#setPlasma2EthereumAndNoteSigned">setPlasma2EthereumAndNoteSigned</a></li><li><a href="2key_TwoKeyRegistry.html#setWalletName">setWalletName</a></li><li><a href="2key_TwoKeyRegistry.html#stringToBytes32">stringToBytes32</a></li><li><a href="2key_TwoKeyRegistry.html#utfStringLength">utfStringLength</a></li></ul></div><div class="reference"><h2>Reference</h2><div class="events"><h3>Events</h3><ul><li><div class="item event"><span id="UserNameChanged" class="anchor-marker"></span><h4 class="name">UserNameChanged</h4><div class="body"><code class="signature">event <strong>UserNameChanged</strong><span>(address owner, string name) </span></code><hr/><div class="description"><p>Event is emitted when a user&#x27;s name is changed.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>owner</code> - address</div><div><code>name</code> - string</div></dd></dl></div></div></li></ul></div><div class="modifiers"><h3>Modifiers</h3><ul><li><div class="item modifier"><span id="onlyAdmin" class="anchor-marker"></span><h4 class="name">onlyAdmin</h4><div class="body"><code class="signature">modifier <strong>onlyAdmin</strong><span>() </span></code><hr/></div></div></li><li><div class="item modifier"><span id="onlyTwoKeyAuthorized" class="anchor-marker"></span><h4 class="name">onlyTwoKeyAuthorized</h4><div class="body"><code class="signature">modifier <strong>onlyTwoKeyAuthorized</strong><span>() </span></code><hr/><div class="description"><p>Modifier which will allow only 2keyAdmin or maintainer to invoke function calls.</p></div></div></div></li><li><div class="item modifier"><span id="onlyTwoKeyEventSource" class="anchor-marker"></span><h4 class="name">onlyTwoKeyEventSource</h4><div class="body"><code class="signature">modifier <strong>onlyTwoKeyEventSource</strong><span>() </span></code><hr/><div class="description"><p>Modifier which will allow only 2key event source to issue calls on selected methods.</p></div></div></div></li><li><div class="item modifier"><span id="onlyTwoKeyMaintainer" class="anchor-marker"></span><h4 class="name">onlyTwoKeyMaintainer</h4><div class="body"><code class="signature">modifier <strong>onlyTwoKeyMaintainer</strong><span>() </span></code><hr/><div class="description"><p>Modifier which will allow only 2keyMaintainer to invoke function calls.</p></div></div></div></li></ul></div><div class="functions"><h3>Functions</h3><ul><li><div class="item function"><span id="addName" class="anchor-marker"></span><h4 class="name">addName</h4><div class="body"><code class="signature">function <strong>addName</strong><span>(string _name, address _sender, string _fullName, string _email) </span><span>public </span></code><hr/><div class="description"><p>Function where only admin can add a name - address pair.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="2key_TwoKeyRegistry.html#onlyTwoKeyMaintainer">onlyTwoKeyMaintainer </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_name</code> - is name of user</div><div><code>_sender</code> - is address of user</div><div><code>_fullName</code> - string</div><div><code>_email</code> - string</div></dd></dl></div></div></li><li><div class="item function"><span id="addNameByUser" class="anchor-marker"></span><h4 class="name">addNameByUser</h4><div class="body"><code class="signature">function <strong>addNameByUser</strong><span>(string _name) </span><span>external </span></code><hr/><div class="description"><p>Function where user can add name to his address.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_name</code> - is name of user</div></dd></dl></div></div></li><li><div class="item function"><span id="addNameSigned" class="anchor-marker"></span><h4 class="name">addNameSigned</h4><div class="body"><code class="signature">function <strong>addNameSigned</strong><span>(string _name, bytes external_sig) </span><span>public </span></code><hr/><div class="description"><p>Add signed name.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_name</code> - is the name</div><div><code>external_sig</code> - is the external signature</div></dd></dl></div></div></li><li><div class="item function"><span id="addPlasma2EthereumByUser" class="anchor-marker"></span><h4 class="name">addPlasma2EthereumByUser</h4><div class="body"><code class="signature">function <strong>addPlasma2EthereumByUser</strong><span>(bytes sig) </span><span>public </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>sig</code> - bytes</div></dd></dl></div></div></li><li><div class="item function"><span id="addTwoKeyMaintainer" class="anchor-marker"></span><h4 class="name">addTwoKeyMaintainer</h4><div class="body"><code class="signature">function <strong>addTwoKeyMaintainer</strong><span>(address _maintainer) </span><span>public </span></code><hr/><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="2key_TwoKeyRegistry.html#onlyAdmin">onlyAdmin </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_maintainer</code> - address</div></dd></dl></div></div></li><li><div class="item function"><span id="addWhereContractor" class="anchor-marker"></span><h4 class="name">addWhereContractor</h4><div class="body"><code class="signature">function <strong>addWhereContractor</strong><span>(address _userAddress, address _contractAddress) </span><span>external </span></code><hr/><div class="description"><p>Only TwoKeyEventSource contract can issue this calls, We&#x27;re requiring the contract address different address 0 because it needs to be deployed, Function to add new campaign contract where user is contractor.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="2key_TwoKeyRegistry.html#onlyTwoKeyEventSource">onlyTwoKeyEventSource </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_userAddress</code> - is address of contractor</div><div><code>_contractAddress</code> - is address of deployed campaign contract</div></dd></dl></div></div></li><li><div class="item function"><span id="addWhereConverter" class="anchor-marker"></span><h4 class="name">addWhereConverter</h4><div class="body"><code class="signature">function <strong>addWhereConverter</strong><span>(address _userAddress, address _contractAddress) </span><span>external </span></code><hr/><div class="description"><p>Only TwoKeyEventSource contract can issue this calls, We&#x27;re requiring the contract address different address 0 because it needs to be deployed, Function to add new campaign contract where user is converter.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="2key_TwoKeyRegistry.html#onlyTwoKeyEventSource">onlyTwoKeyEventSource </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_userAddress</code> - is address of converter</div><div><code>_contractAddress</code> - is address of deployed campaign contract</div></dd></dl></div></div></li><li><div class="item function"><span id="addWhereModerator" class="anchor-marker"></span><h4 class="name">addWhereModerator</h4><div class="body"><code class="signature">function <strong>addWhereModerator</strong><span>(address _userAddress, address _contractAddress) </span><span>external </span></code><hr/><div class="description"><p>Only TwoKeyEventSource contract can issue this calls, We&#x27;re requiring the contract address different address 0 because it needs to be deployed, Function to add new campaign contract where user is moderator.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="2key_TwoKeyRegistry.html#onlyTwoKeyEventSource">onlyTwoKeyEventSource </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_userAddress</code> - is address of moderator</div><div><code>_contractAddress</code> - is address of deployed campaign contract</div></dd></dl></div></div></li><li><div class="item function"><span id="addWhereReferrer" class="anchor-marker"></span><h4 class="name">addWhereReferrer</h4><div class="body"><code class="signature">function <strong>addWhereReferrer</strong><span>(address _userAddress, address _contractAddress) </span><span>external </span></code><hr/><div class="description"><p>Only TwoKeyEventSource contract can issue this calls, We&#x27;re requiring the contract address different address 0 because it needs to be deployed, Function to add new campaign contract where user is refferer.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="2key_TwoKeyRegistry.html#onlyTwoKeyEventSource">onlyTwoKeyEventSource </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_userAddress</code> - is address of refferer</div><div><code>_contractAddress</code> - is address of deployed campaign contract</div></dd></dl></div></div></li><li><div class="item function"><span id="checkIfTwoKeyMaintainerExists" class="anchor-marker"></span><h4 class="name">checkIfTwoKeyMaintainerExists</h4><div class="body"><code class="signature">function <strong>checkIfTwoKeyMaintainerExists</strong><span>(address _maintainer) </span><span>public </span><span>view </span><span>returns  (bool) </span></code><hr/><div class="description"><p>Function to check if maintainer exists.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_maintainer</code> - is the address of maintainer we&#x27;re checking occurence</div></dd><dt><span class="label-return">Returns:</span></dt><dd>true if exists otherwise false</dd></dl></div></div></li><li><div class="item function"><span id="checkIfUserExists" class="anchor-marker"></span><h4 class="name">checkIfUserExists</h4><div class="body"><code class="signature">function <strong>checkIfUserExists</strong><span>(address _userAddress) </span><span>external </span><span>view </span><span>returns  (bool) </span></code><hr/><div class="description"><p>Function to check if the user exists.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_userAddress</code> - is the address of the user</div></dd><dt><span class="label-return">Returns:</span></dt><dd>true if exists otherwise false</dd></dl></div></div></li><li><div class="item function"><span id="getContractsWhereUserIsContractor" class="anchor-marker"></span><h4 class="name">getContractsWhereUserIsContractor</h4><div class="body"><code class="signature">function <strong>getContractsWhereUserIsContractor</strong><span>(address _userAddress) </span><span>external </span><span>view </span><span>returns  (address[]) </span></code><hr/><div class="description"><p>View function - doesn&#x27;t cost any gas to be executed, Function to fetch all campaign contracts where user is contractor.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_userAddress</code> - is address of user</div></dd><dt><span class="label-return">Returns:</span></dt><dd>array of addresses (campaign contracts)</dd></dl></div></div></li><li><div class="item function"><span id="getContractsWhereUserIsConverter" class="anchor-marker"></span><h4 class="name">getContractsWhereUserIsConverter</h4><div class="body"><code class="signature">function <strong>getContractsWhereUserIsConverter</strong><span>(address _userAddress) </span><span>external </span><span>view </span><span>returns  (address[]) </span></code><hr/><div class="description"><p>View function - doesn&#x27;t cost any gas to be executed, Function to fetch all campaign contracts where user is converter.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_userAddress</code> - is address of user</div></dd><dt><span class="label-return">Returns:</span></dt><dd>array of addresses (campaign contracts)</dd></dl></div></div></li><li><div class="item function"><span id="getContractsWhereUserIsModerator" class="anchor-marker"></span><h4 class="name">getContractsWhereUserIsModerator</h4><div class="body"><code class="signature">function <strong>getContractsWhereUserIsModerator</strong><span>(address _userAddress) </span><span>external </span><span>view </span><span>returns  (address[]) </span></code><hr/><div class="description"><p>View function - doesn&#x27;t cost any gas to be executed, Function to fetch all campaign contracts where user is moderator.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_userAddress</code> - is address of user</div></dd><dt><span class="label-return">Returns:</span></dt><dd>array of addresses (campaign contracts)</dd></dl></div></div></li><li><div class="item function"><span id="getContractsWhereUserIsReferrer" class="anchor-marker"></span><h4 class="name">getContractsWhereUserIsReferrer</h4><div class="body"><code class="signature">function <strong>getContractsWhereUserIsReferrer</strong><span>(address _userAddress) </span><span>external </span><span>view </span><span>returns  (address[]) </span></code><hr/><div class="description"><p>View function - doesn&#x27;t cost any gas to be executed, Function to fetch all campaign contracts where user is refferer.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_userAddress</code> - is address of user</div></dd><dt><span class="label-return">Returns:</span></dt><dd>array of addresses (campaign contracts)</dd></dl></div></div></li><li><div class="item function"><span id="getEthereumToPlasma" class="anchor-marker"></span><h4 class="name">getEthereumToPlasma</h4><div class="body"><code class="signature">function <strong>getEthereumToPlasma</strong><span>(address ethereum) </span><span>public </span><span>view </span><span>returns  (address) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>ethereum</code> - address</div></dd><dt><span class="label-return">Returns:</span></dt><dd>address</dd></dl></div></div></li><li><div class="item function"><span id="getHistoryOfChangedAddresses" class="anchor-marker"></span><h4 class="name">getHistoryOfChangedAddresses</h4><div class="body"><code class="signature">function <strong>getHistoryOfChangedAddresses</strong><span>() </span><span>external </span><span>view </span><span>returns  (address[]) </span></code><hr/><div class="description"><p>Get history of changed addresses.</p></div><dl><dt><span class="label-return">Returns:</span></dt><dd>array of addresses sorted</dd></dl></div></div></li><li><div class="item function"><span id="getPlasmaToEthereum" class="anchor-marker"></span><h4 class="name">getPlasmaToEthereum</h4><div class="body"><code class="signature">function <strong>getPlasmaToEthereum</strong><span>(address plasma) </span><span>public </span><span>view </span><span>returns  (address) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>plasma</code> - address</div></dd><dt><span class="label-return">Returns:</span></dt><dd>address</dd></dl></div></div></li><li><div class="item function"><span id="getUserAddress2UserName" class="anchor-marker"></span><h4 class="name">getUserAddress2UserName</h4><div class="body"><code class="signature">function <strong>getUserAddress2UserName</strong><span>(address _sender) </span><span>external </span><span>view </span><span>returns  (string) </span></code><hr/><div class="description"><p>View function - doesn&#x27;t cost any gas to be executed, Function to fetch name that corresponds to the address.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_sender</code> - is address of user</div></dd><dt><span class="label-return">Returns:</span></dt><dd>name of the user as type string</dd></dl></div></div></li><li><div class="item function"><span id="getUserData" class="anchor-marker"></span><h4 class="name">getUserData</h4><div class="body"><code class="signature">function <strong>getUserData</strong><span>(address _user) </span><span>external </span><span>view </span><span>returns  (bytes32, bytes32, bytes32) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_user</code> - address</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bytes32</dd><dd>bytes32</dd><dd>bytes32</dd></dl></div></div></li><li><div class="item function"><span id="getUserName2UserAddress" class="anchor-marker"></span><h4 class="name">getUserName2UserAddress</h4><div class="body"><code class="signature">function <strong>getUserName2UserAddress</strong><span>(string _name) </span><span>external </span><span>view </span><span>returns  (address) </span></code><hr/><div class="description"><p>View function - doesn&#x27;t cost any gas to be executed, Function to fetch address of the user that corresponds to given name.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_name</code> - is name of user</div></dd><dt><span class="label-return">Returns:</span></dt><dd>address of the user as type address</dd></dl></div></div></li><li><div class="item function"><span id="removeTwoKeyMaintainer" class="anchor-marker"></span><h4 class="name">removeTwoKeyMaintainer</h4><div class="body"><code class="signature">function <strong>removeTwoKeyMaintainer</strong><span>(address _maintainer) </span><span>public </span></code><hr/><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="2key_TwoKeyRegistry.html#onlyAdmin">onlyAdmin </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_maintainer</code> - address</div></dd></dl></div></div></li><li><div class="item function"><span id="setInitialParams" class="anchor-marker"></span><h4 class="name">setInitialParams</h4><div class="body"><code class="signature">function <strong>setInitialParams</strong><span>(address _twoKeyEventSource, address _twoKeyAdmin, address _maintainer) </span><span>external </span></code><hr/><div class="description"><p>Function which can be called only once.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_twoKeyEventSource</code> - is the address of twoKeyEventSource contract</div><div><code>_twoKeyAdmin</code> - is the address of twoKeyAdmin contract</div><div><code>_maintainer</code> - is the address of initial maintainer</div></dd></dl></div></div></li><li><div class="item function"><span id="setNoteByUser" class="anchor-marker"></span><h4 class="name">setNoteByUser</h4><div class="body"><code class="signature">function <strong>setNoteByUser</strong><span>(bytes note) </span><span>public </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>note</code> - bytes</div></dd></dl></div></div></li><li><div class="item function"><span id="setPlasma2EthereumAndNoteSigned" class="anchor-marker"></span><h4 class="name">setPlasma2EthereumAndNoteSigned</h4><div class="body"><code class="signature">function <strong>setPlasma2EthereumAndNoteSigned</strong><span>(bytes sig, bytes note, bytes external_sig) </span><span>public </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>sig</code> - bytes</div><div><code>note</code> - bytes</div><div><code>external_sig</code> - bytes</div></dd></dl></div></div></li><li><div class="item function"><span id="setWalletName" class="anchor-marker"></span><h4 class="name">setWalletName</h4><div class="body"><code class="signature">function <strong>setWalletName</strong><span>(string username, address _address, string _username_walletName) </span><span>public </span></code><hr/><div class="description"><p>Function where TwoKeyMaintainer can add walletname to address.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="2key_TwoKeyRegistry.html#onlyTwoKeyMaintainer">onlyTwoKeyMaintainer </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>username</code> - is the username of the user we want to update map for</div><div><code>_address</code> - is the address of the user we want to update map for</div><div><code>_username_walletName</code> - is the concatenated username + &#x27;_&#x27; + walletName, since sending from trusted provider no need to validate</div></dd></dl></div></div></li><li><div class="item function"><span id="stringToBytes32" class="anchor-marker"></span><h4 class="name">stringToBytes32</h4><div class="body"><code class="signature">function <strong>stringToBytes32</strong><span>(string source) </span><span>internal </span><span>pure </span><span>returns  (bytes32) </span></code><hr/><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>source</code> - string</div></dd><dt><span class="label-return">Returns:</span></dt><dd>bytes32</dd></dl></div></div></li><li><div class="item function"><span id="utfStringLength" class="anchor-marker"></span><h4 class="name">utfStringLength</h4><div class="body"><code class="signature">function <strong>utfStringLength</strong><span>(string str) </span><span>internal </span><span>pure </span><span>returns  (uint) </span></code><hr/><div class="description"><p>Function to fetch actual length of string.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>str</code> - is the string we&#x27;d like to get length of</div></dd><dt><span class="label-return">Returns:</span></dt><dd>length of the string</dd></dl></div></div></li></ul></div></div></div>
