---
id: 2key_singleton-contracts_TwoKeyExchangeRateContract
title: TwoKeyExchangeRateContract
---

<div class="contract-doc"><div class="contract"><h2 class="contract-header"><span class="contract-kind">contract</span> TwoKeyExchangeRateContract</h2><p class="base-contracts"><span>is</span> <a href="2key_Upgradeable.html">Upgradeable</a><span>, </span><a href="2key_MaintainingPattern.html">MaintainingPattern</a></p><div class="source">Source: <a href="https://github.com/2keynet/web3-alpha/blob/v0.0.3/contracts/2key/singleton-contracts/TwoKeyExchangeRateContract.sol" target="_blank">contracts/2key/singleton-contracts/TwoKeyExchangeRateContract.sol</a></div><div class="author">Author: Nikola Madjarevic This is going to be the contract on which we will store exchange rates between USD and ETH Will be maintained, and updated by our trusted server and CMC api every 8 hours.</div></div><div class="index"><h2>Index</h2><ul><li><a href="2key_singleton-contracts_TwoKeyExchangeRateContract.html#PriceUpdated">PriceUpdated</a></li><li><a href="2key_singleton-contracts_TwoKeyExchangeRateContract.html#getFiatCurrencyDetails">getFiatCurrencyDetails</a></li><li><a href="2key_singleton-contracts_TwoKeyExchangeRateContract.html#setFiatCurrencyDetails">setFiatCurrencyDetails</a></li><li><a href="2key_singleton-contracts_TwoKeyExchangeRateContract.html#setInitialParams">setInitialParams</a></li><li><a href="2key_singleton-contracts_TwoKeyExchangeRateContract.html#stringToBytes32">stringToBytes32</a></li></ul></div><div class="reference"><h2>Reference</h2><div class="events"><h3>Events</h3><ul><li><div class="item event"><span id="PriceUpdated" class="anchor-marker"></span><h4 class="name">PriceUpdated</h4><div class="body"><code class="signature">event <strong>PriceUpdated</strong><span>(bytes32 _currency, uint newRate, uint _timestamp, address _updater) </span></code><hr/><div class="description"><p>Event will be emitted every time we update the price for the fiat.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_currency</code> - bytes32</div><div><code>newRate</code> - uint</div><div><code>_timestamp</code> - uint</div><div><code>_updater</code> - address</div></dd></dl></div></div></li></ul></div><div class="functions"><h3>Functions</h3><ul><li><div class="item function"><span id="getFiatCurrencyDetails" class="anchor-marker"></span><h4 class="name">getFiatCurrencyDetails</h4><div class="body"><code class="signature">function <strong>getFiatCurrencyDetails</strong><span>(string _currency) </span><span>public </span><span>view </span><span>returns  (uint, bool, uint, address) </span></code><hr/><div class="description"><p>Function to get price for the selected currency.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_currency</code> - is the currency (ex. &#x27;USD&#x27;, &#x27;EUR&#x27;, etc.)</div></dd><dt><span class="label-return">Returns:</span></dt><dd>rate between currency and eth wei</dd></dl></div></div></li><li><div class="item function"><span id="setFiatCurrencyDetails" class="anchor-marker"></span><h4 class="name">setFiatCurrencyDetails</h4><div class="body"><code class="signature">function <strong>setFiatCurrencyDetails</strong><span>(bytes32 _currency, bool _isETHGreaterThanCurrency, uint _RateFromOneGreaterThanUnitInWeiOfLesserThanUnit) </span><span>public </span></code><hr/><div class="description"><p>Only twoKeyMaintainer address will be eligible to update it, Function where our backend will update the state (rate between eth_wei and dollar_wei) every 8 hours.</p></div><dl><dt><span class="label-modifiers">Modifiers:</span></dt><dd><a href="2key_MaintainingPattern.html#onlyMaintainer">onlyMaintainer </a></dd><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_currency</code> - is the bytes32 (hex) representation of currency shortcut string (&#x27;USD&#x27;,&#x27;EUR&#x27;,etc)</div><div><code>_isETHGreaterThanCurrency</code> - true if 1 eth = more than 1 unit of X otherwise false</div><div><code>_RateFromOneGreaterThanUnitInWeiOfLesserThanUnit</code> - 1 (greater than currency) == X (the updated value) in the (lesser than currency in WEI)</div></dd></dl></div></div></li><li><div class="item function"><span id="setInitialParams" class="anchor-marker"></span><h4 class="name">setInitialParams</h4><div class="body"><code class="signature">function <strong>setInitialParams</strong><span>(address[] _maintainers, address _twoKeyAdmin) </span><span>external </span></code><hr/><div class="description"><p>Can be called only once, Function which will be called immediately after contract deployment.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>_maintainers</code> - is the array of maintainers addresses</div><div><code>_twoKeyAdmin</code> - is the address of TwoKeyAdmin contract</div></dd></dl></div></div></li><li><div class="item function"><span id="stringToBytes32" class="anchor-marker"></span><h4 class="name">stringToBytes32</h4><div class="body"><code class="signature">function <strong>stringToBytes32</strong><span>(string source) </span><span>internal </span><span>returns  (bytes32) </span></code><hr/><div class="description"><p>If string.length &gt; 32 then the rest after 32nd char will be deleted, Helper method to convert string to bytes32.</p></div><dl><dt><span class="label-parameters">Parameters:</span></dt><dd><div><code>source</code> - string</div></dd><dt><span class="label-return">Returns:</span></dt><dd>result</dd></dl></div></div></li></ul></div></div></div>
